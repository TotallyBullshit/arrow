<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>xSortBy. arrow 0.1.0</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="">

<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/highlight.css" rel="stylesheet">
<link href="css/staticdocs.css" rel="stylesheet">

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<link href='http://fonts.googleapis.com/css?family=Open+Sans|Quicksand' rel='stylesheet' type='text/css'>

<style type="text/css">
	html * {
		font-family: Open Sans;
	}

	h1 {
		font-family: Quicksand;
	}

	h2 {
		font-family: Quicksand;
	}


	h3 {
		font-family: Quicksand;
	}

	h4 {
		font-family: Quicksand;
	}

	h5 {
		font-family: Quicksand;
	}

	h6 {
		font-family: Quicksand;
	}
	.navbar {
		background: white;
	}
	.navbar * {
		color: #333;
	}

	.examples * {
		font-family: monospace;
	}

	code {
		font-family: monospace;
	}

	nav {
		border-width: 1px 0;
		list-style: none;
		padding: 0;
		margin: 0;
		text-align: center;
	}

	nav li {
		display: inline;
	}

	nav a {
		display: inline-block;
		padding: 10px;
	}

</style>
  </head>

  <body>
    <nav class="navbar navbar-default" role="navigation">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">arrow 0.1.0</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

        <li><a href="index.html">Index</a></li>
        <li><a href="#">Tutorials</a></li>
        <li><a href="#">Demos</a></li>
        <li><a href="#">Contact/About</a></li>

      </ul>
      <form class="navbar-form navbar-left" role="search">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search">
        </div>
        <button type="submit" class="btn btn-default">Submit</button>
      </form>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://github.com/rgrannell1/arrow">Github</a></li>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

    <div class="container">
      <header>
        
      </header>
      
      <h1>xSortBy</h1>

<div class="row">
  <div class="span8">
    <h2>Usage</h2>
    <pre><div>xSortBy(pred, coll)</div>
<div>xSortBy...(pred, ...)</div></pre>
    
    <h2>Arguments</h2>
    <dl>
      <dt>pred</dt>
      <dd>a binary predicate. is the left argument
  <b>larger</b> than the right argument?</dd>
      <dt>coll</dt>
      <dd>a collection. The collection to sort.</dd>
      <dt>...</dt>
      <dd>see above.</dd>
    </dl>
    
    <div class="Value">
      <h2>Value</h2>

      <p>A list</p>

    </div>

    <div class="Description">
      <h2>Description</h2>

      <p>Sort a collection using a predicate function.</p>

    </div>

    <div class="Details">
      <h2>Details</h2>

      <p><b>xSortBy</b> allows a collection to be sorted by a custom
comparison operation. A classic example is sorting a
collection of collections (analogous to a data frame) by a
particular column.</p>

      <p><code>coll <- list(list('key1', 10), list('key2', 12),
list('key3', 0))</code></p>

      <p><code>xSortBy((row1 : row2) := xSecondOf(row1) >
xSecondOf(row2), coll)</code></p>

      <p><code>list(list("key2", 12), list("key1", 10), list("key3",
0))</code></p>

      <p>In the above example several rows of collection of
collections are rearranged by the value in one of their
columns.</p>

      <p><b>xSortBy</b> is currently (v0.1.0) inefficient for large
collections, since both recursive and in-place sorting
algorithms are not scalable in R.</p>

    </div>

    <div class="Corner Cases">
      <h2>Corner Cases</h2>

      <p>If <b>pred</b> returns Na it is interpreted as false; the
  right argument is larger than the left.</p>

    </div>
    
    <h2 id="examples">Examples</h2>
    <pre class="examples r"><div class='input'>
# 1. k-nearest neighbours
#   is a patient diabetic?

# ------------- observations ------------- #
#
# the patient in question has a fasting blood glucose level
# of 135 mL / dL, and we also have data on the blood sugar
# of diabetic and non-diabetic individuals.
#
# By finding the most similar blood glucose levels and checking
# whether the people with those readings were or weren&#39;t diabetic.

blood_glucose &lt;- 135

patients_data &lt;-
xZip...(
	&#39;mg per dl (fasting)&#39; =
		c(130, 137, 139, 140, 141, 137, 127, 143, 135, 127,
			77, 79, 79, 79, 88, 87, 95, 82, 93, 94),
	&#39;category&#39; =
		xJoin...(xRepeat(10, &#39;diabetic&#39;), xRepeat(10, &#39;non-diabetic&#39;))
)

k_nearest &lt;- (dist : point : space) := {
	# classification.
	# given a space of points to test against,
	# guess the category of a point based on its nearest neighbours.

	k &lt;- floor( sqrt(xLenOf(space)) )

	dist_to_test_point &lt;- xPartial...(dist, point)

	distances &lt;-
		x_(space) $ xPluck(&#39;mg per dl (fasting)&#39;) $
		xMap(dist_to_test_point) $ x_AsDouble()

	# rank the distances from closest to furthest.
	nearest &lt;- x_(space[xRankOf(distances) &lt;= k])

	# get the frequencies of the categories among the closest.
	category_frequencies &lt;-
		nearest $ xPluck(&#39;category&#39;) $
		xTabulate() $ x_SortBy(
			(a : b) := xSecondOf(b) &gt; xSecondOf(b)
		)

	# select the name of the most frequent category
	xFirstOf(xFirstOf(category_frequencies))
}

k_nearest(
	(x1 : x2) := abs(x1 - x2), blood_glucose, patients_data)
</div>
<div class='output'>[1] &quot;diabetic&quot;
</div>
<div class='input'>
# &#39;diabetic&#39;

# 2. CE Get the N longest lines
#    text from Wikipedia

paragraph &lt;-
&quot;The plant glutamate cysteine ligase (GCL) is a redox-sensitive homodimeric enzyme, conserved in the plant kingdom.
[11] In an oxidizing environment, intermolecular disulfide bridges are formed and the enzyme switches to the dimeric active state.
 The midpoint potential of the critical cysteine pair is -318 mV.
 In addition to the redox-dependent control is the plant GCL enzyme feedback inhibited by GSH.
 [12] GCL is exclusively located in plastids, and glutathione synthetase is dual-targeted to plastids and cytosol, thus are GSH and gamma-glutamylcysteine exported from the plastids.
 [13] Both glutathione biosynthesis enzymes are essential in plants; knock-outs of GCL and GS are lethal to embryo and seedling.&quot;

x_(paragraph) $
xToLines() $
xSortBy((line1 : line2) := {
	nchar(line2) &gt; nchar(line1)
}) $
x_Take(3)
</div>
<div class='output'>[[1]]
[1] &quot; [12] GCL is exclusively located in plastids, and glutathione synthetase is dual-targeted to plastids and cytosol, thus are GSH and gamma-glutamylcysteine exported from the plastids.&quot;

[[2]]
[1] &quot;[11] In an oxidizing environment, intermolecular disulfide bridges are formed and the enzyme switches to the dimeric active state.&quot;

[[3]]
[1] &quot; [13] Both glutathione biosynthesis enzymes are essential in plants; knock-outs of GCL and GS are lethal to embryo and seedling.&quot;

</div>
<div class='input'>
# list(
#     &quot; [12] GCL is exclusively located in plastids, and glutathione synthetase is dual-targeted to plastids and cytosol, thus are GSH and gamma-glutamylcysteine exported from the plastids.&quot;,
#     &quot;[11] In an oxidizing environment, intermolecular disulfide bridges are formed and the enzyme switches to the dimeric active state.&quot;,
#     &quot; [13] Both glutathione biosynthesis enzymes are essential in plants; knock-outs of GCL and GS are lethal to embryo and seedling.&quot;
# )

# 3. CE How many ways do numbers drawn from an
#    array sum to zero?

nums &lt;- c(-2, 2, -4, 2, -2, -6)

x_(xProdSetOf...(nums, nums, nums, nums)) $
xSelect(
	xs := {
		(unlist %then% sum)(xs) == 0
	}
) $
x_UniqueOf()
</div>
<div class='output'>[[1]]
[[1]][[1]]
[1] 2

[[1]][[2]]
[1] 2

[[1]][[3]]
[1] -2

[[1]][[4]]
[1] -2


[[2]]
[[2]][[1]]
[1] 2

[[2]][[2]]
[1] -2

[[2]][[3]]
[1] 2

[[2]][[4]]
[1] -2


[[3]]
[[3]][[1]]
[1] -2

[[3]][[2]]
[1] 2

[[3]][[3]]
[1] 2

[[3]][[4]]
[1] -2


[[4]]
[[4]][[1]]
[1] 2

[[4]][[2]]
[1] -2

[[4]][[3]]
[1] -2

[[4]][[4]]
[1] 2


[[5]]
[[5]][[1]]
[1] -2

[[5]][[2]]
[1] 2

[[5]][[3]]
[1] -2

[[5]][[4]]
[1] 2


[[6]]
[[6]][[1]]
[1] -2

[[6]][[2]]
[1] -2

[[6]][[3]]
[1] 2

[[6]][[4]]
[1] 2


[[7]]
[[7]][[1]]
[1] -6

[[7]][[2]]
[1] 2

[[7]][[3]]
[1] 2

[[7]][[4]]
[1] 2


[[8]]
[[8]][[1]]
[1] 2

[[8]][[2]]
[1] -6

[[8]][[3]]
[1] 2

[[8]][[4]]
[1] 2


[[9]]
[[9]][[1]]
[1] 2

[[9]][[2]]
[1] 2

[[9]][[3]]
[1] -6

[[9]][[4]]
[1] 2


[[10]]
[[10]][[1]]
[1] 2

[[10]][[2]]
[1] 2

[[10]][[3]]
[1] 2

[[10]][[4]]
[1] -6


</div>
<div class='input'>
# list(
#     list(2, 2, -2, -2), list(2, -2, 2, -2),
#     list(-2, 2, 2, -2), list(2, -2, -2, 2),
#     list(-2, 2, -2, 2), list(-2, -2, 2, 2),
#     list(-6, 2, 2, 2),  list(2, -6, 2, 2),
#     list(2, 2, -6, 2),  list(2, 2, 2, -6)
# )
</div></pre>
  </div>
  <div class="span4">
    <!-- <ul>
      <li>xSortBy</li><li>xSortBy...</li>
    </ul>
    <ul>
      
    </ul> -->

    <h2>See also</h2>
    
Other reshaping_functions: <code><a href='xChop.html'>xChop</a></code>,
<code><a href='xChop.html'>xChop...</a></code>; <code><a href='xChunk.html'>xChunk</a></code>,
<code><a href='xChunk.html'>xChunk...</a></code>; <code><a href='xFlatten.html'>xFlatten</a></code>,
<code><a href='xFlatten.html'>xFlatten...</a></code>; <code><a href='xJoin.html'>xJoin</a></code>,
<code><a href='xJoin.html'>xJoin...</a></code>; <code><a href='xOneOf.html'>xOneOf</a></code>,
<code><a href='xOneOf.html'>xOneOf...</a></code>; <code><a href='xRecycle.html'>xRecycle</a></code>,
<code><a href='xRecycle.html'>xRecycle...</a></code>; <code><a href='xRepeat.html'>xRepeat</a></code>,
<code><a href='xRepeat.html'>xRepeat...</a></code>; <code><a href='xReverse.html'>xReverse</a></code>,
<code><a href='xReverse.html'>xReverse...</a></code>; <code><a href='xShuffle.html'>xShuffle</a></code>,
<code><a href='xShuffle.html'>xShuffle...</a></code>; <code><a href='xSplitAt.html'>xSplitAt</a></code>,
<code><a href='xSplitAt.html'>xSplitAt...</a></code>; <code><a href='xSplitBy.html'>xSplitBy</a></code>,
<code><a href='xSplitBy.html'>xSplitBy...</a></code>; <code><a href='xTabulate.html'>xTabulate</a></code>,
<code><a href='xTabulate.html'>xTabulate...</a></code>; <code><a href='xUnzipNames.html'>xUnzipNames</a></code>,
<code><a href='xUnzipNames.html'>xUnzipNames...</a></code>; <code><a href='xZipNames.html'>xZipNames</a></code>,
<code><a href='xZipNames.html'>xZipNames...</a></code>; <code><a href='xZip.html'>xZip</a></code>,
<code><a href='xZip.html'>xZip...</a></code>

    
  </div>
</div>
      
      <footer>
      
      </footer>
    </div>
  </body>
</html>